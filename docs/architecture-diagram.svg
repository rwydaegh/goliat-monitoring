<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 640">
  <!-- Arrow markers (must be in defs first) -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Dashboard Box -->
  <rect x="50" y="20" width="700" height="150" fill="#f0f0f0" stroke="#333" stroke-width="2" rx="5"/>
  <text x="400" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Railway Dashboard (Next.js)</text>
  
  <!-- Dashboard Components -->
  <rect x="80" y="60" width="180" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="1" rx="3"/>
  <text x="170" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">Dashboard Overview</text>
  
  <rect x="310" y="60" width="180" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="1" rx="3"/>
  <text x="400" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">Super-Study Manager</text>
  
  <rect x="540" y="60" width="180" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="1" rx="3"/>
  <text x="630" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">Worker Details</text>
  
  <!-- API Routes Box (inside dashboard) -->
  <rect x="80" y="130" width="640" height="30" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="3"/>
  <text x="400" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="10">Next.js API Routes: /api/heartbeat /api/gui-update /api/assignments /api/workers /api/super-studies /api/results</text>
  
  <!-- Arrow down from dashboard -->
  <line x1="400" y1="170" x2="400" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- PostgreSQL Box -->
  <rect x="200" y="250" width="400" height="120" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
  <text x="400" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Railway PostgreSQL</text>
  <text x="400" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="12">(State, Metadata, Files)</text>
  
  <!-- Database tables - left column -->
  <text x="220" y="320" font-family="Arial, sans-serif" font-size="11">• workers</text>
  <text x="220" y="340" font-family="Arial, sans-serif" font-size="11">• super_studies</text>
  <text x="220" y="360" font-family="Arial, sans-serif" font-size="11">• assignments</text>
  
  <!-- Database tables - right column -->
  <text x="450" y="320" font-family="Arial, sans-serif" font-size="11">• progress_events</text>
  <text x="450" y="340" font-family="Arial, sans-serif" font-size="11">• gui_state</text>
  <text x="450" y="360" font-family="Arial, sans-serif" font-size="11">• result_files (BYTEA)</text>
  
  <!-- Arrow down from database -->
  <line x1="400" y1="370" x2="400" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- HTTP label -->
  <text x="420" y="410" font-family="Arial, sans-serif" font-size="10" fill="#666">HTTP POST/GET</text>
  
  <!-- Worker Machines Box -->
  <rect x="50" y="430" width="700" height="190" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="5"/>
  <text x="400" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Worker Machines (Cloud VMs or Local)</text>
  
  <!-- GOLIAT Process Box (taller, centered) -->
  <rect x="150" y="480" width="500" height="120" fill="#fff" stroke="#c2185b" stroke-width="1" rx="3"/>
  <text x="400" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">GOLIAT Study Process (with GUI)</text>
  <text x="170" y="535" font-family="Arial, sans-serif" font-size="11">• ProgressGUI (PySide6) shows on-screen</text>
  <text x="170" y="555" font-family="Arial, sans-serif" font-size="11">• QueueHandler processes messages</text>
  <text x="170" y="575" font-family="Arial, sans-serif" font-size="11">• WebGUIBridge forwards to dashboard</text>
</svg>
